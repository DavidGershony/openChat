<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="56"
             x:Class="OpenChat.UI.Controls.MessageInput"
             x:Name="Root">

    <Border Padding="12" Background="{StaticResource BackgroundLightBrush}"
            BorderBrush="{StaticResource BorderDefaultBrush}" BorderThickness="0,1,0,0">
        <Grid ColumnDefinitions="Auto,*,Auto" Height="40">
            <!-- Attachment Button -->
            <Button Grid.Column="0" Classes="icon" Margin="0,0,8,0" ToolTip.Tip="Attach file"
                    Command="{Binding AttachCommand, ElementName=Root}">
                <PathIcon Data="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"
                          Width="20" Height="20" />
            </Button>

            <!-- Text Input -->
            <TextBox Grid.Column="1"
                     Text="{Binding MessageText, ElementName=Root, Mode=TwoWay}"
                     Watermark="Type a message..."
                     AcceptsReturn="False"
                     TextWrapping="NoWrap"
                     VerticalContentAlignment="Center"
                     KeyDown="OnKeyDown" />

            <!-- Send Button -->
            <Button Grid.Column="2" Classes="primary" Margin="8,0,0,0"
                    Command="{Binding SendCommand, ElementName=Root}"
                    IsEnabled="{Binding CanSend, ElementName=Root}"
                    Width="40" Height="40" CornerRadius="20" Padding="0">
                <PathIcon Data="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"
                          Width="20" Height="20" Foreground="White" />
            </Button>
        </Grid>
    </Border>
</UserControl>
