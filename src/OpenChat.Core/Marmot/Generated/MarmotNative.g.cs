// <auto-generated>
// This code is generated by csbindgen.
// DON'T CHANGE THIS DIRECTLY.
// </auto-generated>
#pragma warning disable CS8500
#pragma warning disable CS8981
using System;
using System.Runtime.InteropServices;


namespace OpenChat.Core.Marmot.Generated
{
    internal static unsafe partial class MarmotNative
    {
        const string __DllName = "openchat_native";





        /// <summary>
        ///  Get the last error message.
        ///  Returns null if no error occurred.
        ///  The caller must free the returned string using `marmot_free_string`.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_get_last_error", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_get_last_error();

        /// <summary>
        ///  Create a new Marmot client with the given Nostr identity.
        ///
        ///  # Arguments
        ///  * `private_key_hex` - The Nostr private key in hex format
        ///  * `public_key_hex` - The Nostr public key in hex format
        ///
        ///  # Returns
        ///  A pointer to the client, or null on failure.
        ///  The caller must free the client using `marmot_destroy_client`.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_create_client", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern MarmotClient* marmot_create_client(byte* private_key_hex, byte* public_key_hex);

        /// <summary>
        ///  Destroy a Marmot client and free its resources.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_destroy_client", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern void marmot_destroy_client(MarmotClient* client);

        /// <summary>
        ///  Generate a new KeyPackage for group invitations.
        ///
        ///  # Returns
        ///  A pointer to the KeyPackage data, or null on failure.
        ///  The caller must free the buffer using `marmot_free_buffer`.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_generate_key_package", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_generate_key_package(MarmotClient* client, int* data_length);

        /// <summary>
        ///  Create a new MLS group.
        ///
        ///  # Returns
        ///  A pointer to the group ID, or null on failure.
        ///  The caller must free the buffer using `marmot_free_buffer`.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_create_group", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_create_group(MarmotClient* client, byte* group_name, int* group_id_length, ulong* epoch);

        /// <summary>
        ///  Add a member to a group using their KeyPackage.
        ///
        ///  # Returns
        ///  A pointer to the Welcome message data, or null on failure.
        ///  The caller must free the buffer using `marmot_free_buffer`.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_add_member", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_add_member(MarmotClient* client, byte* group_id, int group_id_length, byte* key_package_data, int key_package_length, int* welcome_length);

        /// <summary>
        ///  Process a Welcome message to join a group.
        ///
        ///  # Returns
        ///  A pointer to the group ID, or null on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_process_welcome", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_process_welcome(MarmotClient* client, byte* welcome_data, int welcome_length, int* group_id_length, ulong* epoch, byte** group_name, byte** members_json);

        /// <summary>
        ///  Encrypt a message for a group.
        ///
        ///  # Returns
        ///  A pointer to the ciphertext, or null on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_encrypt_message", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_encrypt_message(MarmotClient* client, byte* group_id, int group_id_length, byte* plaintext, int* ciphertext_length);

        /// <summary>
        ///  Decrypt a message from a group.
        ///
        ///  # Returns
        ///  A pointer to the plaintext string, or null on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_decrypt_message", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_decrypt_message(MarmotClient* client, byte* group_id, int group_id_length, byte* ciphertext, int ciphertext_length, byte** sender_public_key, ulong* epoch);

        /// <summary>
        ///  Process a commit message.
        ///
        ///  # Returns
        ///  0 on success, non-zero on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_process_commit", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern int marmot_process_commit(MarmotClient* client, byte* group_id, int group_id_length, byte* commit_data, int commit_length);

        /// <summary>
        ///  Update keys for forward secrecy.
        ///
        ///  # Returns
        ///  A pointer to the commit data, or null on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_update_keys", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_update_keys(MarmotClient* client, byte* group_id, int group_id_length, int* commit_length);

        /// <summary>
        ///  Remove a member from a group.
        ///
        ///  # Returns
        ///  A pointer to the commit data, or null on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_remove_member", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_remove_member(MarmotClient* client, byte* group_id, int group_id_length, byte* member_public_key, int* commit_length);

        /// <summary>
        ///  Get information about a group.
        ///
        ///  # Returns
        ///  0 on success, non-zero if group not found.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_get_group_info", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern int marmot_get_group_info(MarmotClient* client, byte* group_id, int group_id_length, byte** group_name, ulong* epoch, byte** members_json);

        /// <summary>
        ///  Export group state for persistence.
        ///
        ///  # Returns
        ///  A pointer to the state data, or null on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_export_group_state", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern byte* marmot_export_group_state(MarmotClient* client, byte* group_id, int group_id_length, int* state_length);

        /// <summary>
        ///  Import group state from persistence.
        ///
        ///  # Returns
        ///  0 on success, non-zero on failure.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_import_group_state", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern int marmot_import_group_state(MarmotClient* client, byte* group_id, int group_id_length, byte* state, int state_length);

        /// <summary>
        ///  Free a buffer allocated by this library.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_free_buffer", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern void marmot_free_buffer(byte* buffer);

        /// <summary>
        ///  Free a string allocated by this library.
        /// </summary>
        [DllImport(__DllName, EntryPoint = "marmot_free_string", CallingConvention = CallingConvention.Cdecl, ExactSpelling = true)]
        internal static extern void marmot_free_string(byte* s);


    }

    /// <summary>
    ///  The main Marmot client that wraps MDK for FFI access.
    /// </summary>
    [StructLayout(LayoutKind.Sequential)]
    internal unsafe partial struct MarmotClient
    {
    }



}
